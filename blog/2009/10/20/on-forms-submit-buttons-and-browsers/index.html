
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>On forms, submit buttons and browsers - No Rest For The Weekend</title>
  <meta name="author" content="Mark Stickley">

  
  <meta name="description" content="Aah, ambiguity! What a tricky devil you are. The W3C Recommendations are normally very specific and not at all ambiguous, but when things are left &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.norestfortheweekend.com/blog/2009/10/20/on-forms-submit-buttons-and-browsers">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/prefixfree.min.js" type="text/javascript"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>

  <link href="http://feeds.feedburner.com/NoRestForTheWeekend" rel="alternate" title="No Rest For The Weekend" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-537105-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner" id="banner"><hgroup>
  <h1><a href="/">No Rest For The Weekend</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/NoRestForTheWeekend" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.norestfortheweekend.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">On Forms, Submit Buttons and Browsers</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-20T10:10:52+01:00" pubdate data-updated="true">Oct 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Aah, ambiguity! What a tricky devil you are. The <a href="http://www.w3.org">W3C</a> Recommendations are normally very specific and not at all ambiguous, but when things are left open to interpretation you can be fairly sure of varying results.</p>

<h2 id="bad-form-old-chap">Bad form, old chap</h2>

<p>Have a look at this form:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>HTML    </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;wherever.html&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;firstname&quot;</span><span class="nt">&gt;</span>First name<span class="nt">&lt;/label&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;firstname&quot;</span> <span class="na">id=</span><span class="s">&quot;firstname&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">name=</span><span class="s">&quot;proceed&quot;</span> <span class="na">value=</span><span class="s">&quot;Proceed&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">name=</span><span class="s">&quot;back&quot;</span> <span class="na">value=</span><span class="s">&quot;Back&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line"><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>What gets submitted when you hit Proceed? Well yes, <code>firstname</code> is included as is <code>proceed</code>, but is <code>back</code>? What gets submitted when you hit Back, as the second submit button in the form?</p>

<p>Well the <a href="http://www.w3.org/TR/html401/interact/forms.html#submit-format">W3C Guidelines on form submission</a> say that for forms with more than one submit button, only the submit button that was pressed should be submitted. This seems fair enough.</p>

<p><strong>But what gets submitted when you press enter from within the text field?</strong></p>

<p>The W3C has no recommendation for this! The precise wording used to qualify whether a submit button gets sent along with the other form data is:</p>

<blockquote>
  <p>If a form contains more than one submit button, only the activated submit button is successful.</p>
</blockquote>

<p>…where ‘activated’ means having been clicked on to submit the form and being ‘successful’ refers to the selection process for including form elements in the request.</p>

<h2 id="pressing-the-right-buttons-or-not-as-the-case-may-be">Pressing the right buttons (or not, as the case may be)</h2>

<p>What actually happens varies between browsers, which I suppose is no surprise really. The surprise is which browsers do what.</p>

<p>We see two behaviors here:</p>

<ul>
  <li>IE (I tested 6, 7 &amp; 8) works on the basis that you only submit an <em>activated</em> form element and the only way to activate a submit button is to <em>click on it</em>. Therefore if you click on a submit button, IE will submit it’s value along with the rest of the form, but if you press <em>Enter</em> to submit it doesn’t submit the value of <em>any</em> submit buttons.</li>
  <li>All other browsers (tested: Firefox, Safari, Chrome, Opera) submit a value for a submit button, <em>whether or not you click it</em>. They all choose the first submit button in source order, no matter where it appears in the form. Thank goodness that’s consistent!</li>
</ul>

<p>I guess that the other browsers think it’s fair to assume that pressing enter while entering data into a form is the same as clicking on the submit button, which in most cases it is. But what happens when you’ve got two or more submit buttons? How do you know which button the user wanted to click? How can the developer predict that, supposing they even know about this peculiarity? Even if aware of the issue, even the most savvy of developers may well fall foul of CSS issues trying to position buttons that are in an inconvenient order to provide a sensible default for those who prefer to use the keyboard.</p>

<p>Yes, this time <em>I think IE got it right</em>!</p>

<h2 id="how-to-fix-the-problem">How to fix the problem</h2>

<p>I think anyone that works with browsers will admit that we all dream of a world where they all have consistent and good behavior. But failing that, consistent behavior would be nice. </p>

<p>I’m not convinced that all the other browsers will change their behavior any time soon (even if they could be convinced that what they are doing isn’t the right option) as there are probably hundreds of thousands of sites out there that will break if it changes. So the best thing to do is to ‘fix’ IE to behave the same.</p>

<p>Here’s the code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>HTML    </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;wherever.html&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;firstname&quot;</span><span class="nt">&gt;</span>First name<span class="nt">&lt;/label&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;firstname&quot;</span> <span class="na">id=</span><span class="s">&quot;firstname&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;&lt;a href=&#39;http://atlantic-drugs.net/products/accutane.htm&#39;&gt;hidden&lt;/a&gt;&quot;</span> <span class="na">name=</span><span class="s">&quot;submit_button&quot;</span> <span class="na">value=</span><span class="s">&quot;Proceed&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">name=</span><span class="s">&quot;submit_button&quot;</span> <span class="na">value=</span><span class="s">&quot;Proceed&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line">    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">name=</span><span class="s">&quot;submit_button&quot;</span> <span class="na">value=</span><span class="s">&quot;Back&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
</span><span class="line"><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You’ll notice I changed a few things around! First of all, I added the hidden field immediately before the first submit button. The first button is the one which acts as the default button in FF, Safari <em>et al.</em> and so we are making it do the same in IE. By adding a hidden field with the same name and value as the first button <strong>immediately before</strong> the button itself, it effectively acts as a default. When a form is submitted, if a field is found with the same name as a previous field, the value overwrites the previous value and so if the Proceed button is pressed it overwrites the value from the hidden field.</p>

<p>In IE if the user presses Enter to submit the form, neither button is pressed and the hidden field gets submitted. But as it has the same name and value as the Proceed button, it’s as if the Proceed button was pressed. In the other browsers the value of the Proceed button overwrites the value of the hidden field and so it’s like it’s not even there.</p>

<p>That’s all fine but if the Back button is clicked the hidden field will be submitted as well giving an impossible value for both the submit buttons in the same request! That’s why I’ve also changed the name of the Back button to be the same as the name of the Proceed button - that way there will always be a value submitted for <code>submit_button</code>: either “Back” or the default “Proceed”.</p>

<p><em>Notice I didn’t call any of the fields “<code>submit</code>”. That was intentional, and it’s because if we ever want to submit the form via Javascript having a field named <code>submit</code> would make that impossible.</em></p>

<h2 id="but-is-it-really-a-problem">But is it really a problem?</h2>

<p>That solution is a bit clunky to be honest. Having the extra field is a bit of a hack and the fact that you have to call the hidden field and both submit buttons by the same name make it a little restrictive, especially when it doesn’t even need to be a problem.</p>

<p>Armed with the knowledge in this article we know that we can’t rely on the values of the submit buttons to be broadcast. If we don’t know which button has been clicked, we simply choose a default action and perform that unless we detect the alternative action. In PHP and for the first form it would go something like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>PHP</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="x">if($_SERVER[&#39;REQUEST_METHOD&#39;]==&#39;POST&#39;){ // if a form was submitted</span>
</span><span class="line"><span class="x">	if(array_key_exists(&#39;back&#39;, $_POST)){ // if the back button was clicked</span>
</span><span class="line"><span class="x">		// Perform back action</span>
</span><span class="line"><span class="x">	}</span>
</span><span class="line"><span class="x">	else{</span>
</span><span class="line"><span class="x">		// Perform default action</span>
</span><span class="line"><span class="x">	}</span>
</span><span class="line"><span class="x">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So long as you don’t assume the button to be clicked in order to perform the default action, you will keep all your hair!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mark Stickley</span></span>

      








  


<time datetime="2009-10-20T10:10:52+01:00" pubdate data-updated="true">Oct 20<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/coding/'>coding</a>, <a class='category' href='/blog/categories/html/'>html</a>
  
</span>


    </p>
    <p class="rssCta"><a href="http://feeds.feedburner.com/NoRestForTheWeekend" title="Subscribe to the RSS feed now!">Subscribe to the RSS feed now!</a></p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.norestfortheweekend.com/blog/2009/10/20/on-forms-submit-buttons-and-browsers/" data-via="norestftw" data-counturl="http://blog.norestfortheweekend.com/blog/2009/10/20/on-forms-submit-buttons-and-browsers/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/10/03/how-to-stop-a-mighty-mouse-scroll-ball-sticking/" title="Previous Post: How to stop a Mighty Mouse scroll ball sticking">&laquo; How to stop a Mighty Mouse scroll ball sticking</a>
      
      
        <a class="basic-alignment right" href="/blog/2009/11/09/barcamp-london-7/" title="Next Post: BarCamp London 7">BarCamp London 7 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/07/11/zero-image-close-buttons/">Zero image close buttons</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/12/moving-from-wordpress-to-octopress/">Moving from Wordpress to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/14/3ds-browser-revisited/">3DS browser revisited</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/04/30/webkit-doesnt-fire-the-load-event-on-images/">Webkit doesn't fire the load event on images</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/02/26/css3-gradients-multiple-backgrounds-and-ie7/">CSS3 gradients, multiple backgrounds and IE7</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("norestftw", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/norestftw" class="twitter-follow-button" data-show-count="false">Follow @norestftw</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Mark Stickley -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'norestfortheweekend';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.norestfortheweekend.com/blog/2009/10/20/on-forms-submit-buttons-and-browsers/';
        var disqus_url = 'http://blog.norestfortheweekend.com/blog/2009/10/20/on-forms-submit-buttons-and-browsers/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="/javascripts/nrftw.js" type="text/javascript"></script>


</body>
</html>

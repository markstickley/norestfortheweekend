<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: development | No Rest For The Weekend]]></title>
  <link href="http://blog.norestfortheweekend.com/blog/categories/development/atom.xml" rel="self"/>
  <link href="http://blog.norestfortheweekend.com/"/>
  <updated>2013-06-07T08:49:41+01:00</updated>
  <id>http://blog.norestfortheweekend.com/</id>
  <author>
    <name><![CDATA[Mark Stickley]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[In Defence Of The BBC And Its Clock]]></title>
    <link href="http://blog.norestfortheweekend.com/blog/2013/06/06/in-defence-of-the-bbc-and-its-clock/"/>
    <updated>2013-06-06T23:00:00+01:00</updated>
    <id>http://blog.norestfortheweekend.com/blog/2013/06/06/in-defence-of-the-bbc-and-its-clock</id>
    <content type="html"><![CDATA[<p>The <abbr title="British Broadcasting Corporation">BBC</abbr> has said that due to a single person complaining, <a href="http://www.bbc.co.uk/news/entertainment-arts-22768861">they will be removing the clock from the home page</a>. The news has been reported fairly widely, particularly through technology channels, and people have been very vocal about their feelings on one particular point:</p>

<ul>
  <li>How could it possibly take 100 days to fix the problem?</li>
</ul>

<p>Having worked for the <abbr title="British Broadcasting Corporation">BBC</abbr> for 4 years I would agree on that estimate, and I’ll explain why. First, I need to explain a little about the <abbr title="British Broadcasting Corporation">BBC</abbr> some of the history surrounding the clock.</p>

<h2 id="history">History</h2>

<p><img class="center /images/posts/2013/06/06/in-defence-of-the-bbc-and-its-clock/clocks.jpg 790 592 ‘The <abbr title=British Broadcasting" src="Corporation">BBC</abbr>" title="clock through the ages’" ></p>

<p>The <a href="https://www.google.co.uk/search?q=bbc+clock&amp;tbm=isch"><abbr title="British Broadcasting Corporation">BBC</abbr> clock</a> has been around for a long time. It has had many incarnations and is an integral part of the <abbr title="British Broadcasting Corporation">BBC</abbr>’s history. It first appeared on BBC1 as an actual clock with a camera pointing at it, and then digital representations in the same style appeared. During a major redesign of the <abbr title="British Broadcasting Corporation">BBC</abbr> home page it was lovingly recreated in Flash as an homage to this iconic timepiece.</p>

<p>A subsequent redesign removed the clock from the home page but due to an outcry from regular visitors to the site it was reinstated, and rewritten to use the modern <code>canvas</code> <abbr title="Hypertext Markup Language">HTML</abbr> element with Flash as a fallback to give the best available experience.</p>

<h2 id="the-trust">The Trust</h2>

<p>The <a href="http://www.bbc.co.uk/bbctrust/"><abbr title="British Broadcasting Corporation">BBC</abbr> Trust</a> is an independent body who governs the <abbr title="British Broadcasting Corporation">BBC</abbr> and is intended to act in the best interests of the licence fee payers (for the benefit of international readers, everyone in the UK who owns a TV must pay a yearly fee which mainly funds the output of the <abbr title="British Broadcasting Corporation">BBC</abbr> which is broadcast ad-free). This basically means that the Trust have final say in matters such as this. A single complaint such as this can out-weigh the opinions of many if the Trust feel that the <abbr title="British Broadcasting Corporation">BBC</abbr> is not upholding its core values.</p>

<p>One of the core values of the <abbr title="British Broadcasting Corporation">BBC</abbr> is to never knowingly broadcast inaccurate information. As the clock is on the <abbr title="British Broadcasting Corporation">BBC</abbr> home page, it looks like that information comes from the <abbr title="British Broadcasting Corporation">BBC</abbr>, and therefore should be accurate. As the time displayed actually comes from the user’s computer it has the potential to be inaccurate and therefore make the <abbr title="British Broadcasting Corporation">BBC</abbr> home page inaccurate, and that is unacceptable.</p>

<h2 id="breaking-down-the-problem">Breaking down the problem</h2>

<p>As the clock has been criticised for its accuracy, a fix that makes it anything less than perfect for every single user would be unacceptable. Here are the facts:</p>

<ol>
  <li>As already established, you can’t trust the user’s clock.</li>
  <li>The site is not restricted to people within a single time zone, the clock will have to display the correct time according to the time zone the user is in.</li>
  <li>As we can’t trust any time information on the user’s computer(1), we can’t rely on their computer to provide a time zone automatically.</li>
  <li>Getting a user’s location by IP address is never 100% accurate, particularly when using mobile broadband so we can’t use that.</li>
  <li>This leaves us with only one option (since we can’t rely on every device having GPS built in) - the user must manually provide their time zone, which can be stored in a cookie or a similar client-side storage mechanism.</li>
  <li>To make the clock accurate if they move time zones, or if they have not yet provided a time zone, the time zone must be displayed along side the clock.</li>
</ol>

<p>Now that the facts are clearer the problem can be broken down.</p>

<p><strong>User Experience &amp; Design</strong>:</p>

<ul>
  <li>How should the time zone be displayed next to the clock?</li>
  <li>How does the user know they can change it?</li>
  <li>How does the interaction to change the time zone work / look?</li>
  <li>Does this all fit within the <abbr title="British Broadcasting Corporation">BBC</abbr>’s <abbr title="User Experience">UX</abbr> guidelines?</li>
</ul>

<p>These are all decisions that will need consideration and questions that will need answering before at least some of the development starts. Design documents will be created in order to accurately pass on the outcome of these decisions to the developers.</p>

<p><abbr title="User Experience &amp; Design">UX&D</abbr> will also perform some user testing to make sure the solution is easy to use and understandable. There may also be accessibility testing to ensure disabled users can still get the most out of the site possible including use of the clock.</p>

<p><strong>Development</strong>:</p>

<ul>
  <li>How do we build this so that the home page retains its current high level of cachability which is necessary for the load the <abbr title="British Broadcasting Corporation">BBC</abbr> experiences?</li>
  <li>How do we deliver the time accurately to the end-user?</li>
  <li>How do we minimise load and rendering times on the home page?</li>
</ul>

<p>When you have a site with as much traffic as the <abbr title="British Broadcasting Corporation">BBC</abbr> there is a strong need for a good caching strategy to avoid overloading the servers and mitigating downtime. When it comes to delivering the time, one option would be to embed it in the body of the page, but this would mean that the cache would have to be regenerated every second which is an inefficient solution. There is the possibility of using post-cache/edge includes to insert the time with placeholders but this would be on every request and even more inefficient.</p>

<p>Logically then, you would need a separate <abbr title="Asynchronous Javascript And XML">AJAX</abbr> call to get the current time. This could result in a short period of time when the clock displayed no time at all before the time had loaded which would look bad. This would have to be referred back to <abbr title="User Experience &amp; Design">UX&D</abbr> for approval.</p>

<p>To serve the accurate time the <abbr title="British Broadcasting Corporation">BBC</abbr> would need to set up one or more time servers capable of handling the constant load of every single person who visited the home page. Not only would the servers need to maintain perfectly accurate time but they would need to deliver it to the user in a fraction of a second wherever they were in the world.</p>

<p>Because any request that took longer than 1 second would make the clock inaccurate there would have to be a series of servers at various locations around the world capable between them of delivering a latency lower than 1 second to any country. This would take some setting up, particularly if you want to defend against <abbr title="Distributed Denial of Service">DDoS</abbr> attacks.</p>

<h2 id="days">100 days?</h2>

<p>Given the complexity of the task, the number of different teams &amp; discipines involved, the infrastucture and the attention to detail required, perhaps 100 days doesn’t seem that mad after all. I don’t think so.</p>

<p><strong>Update 07/06/2013</strong>:</p>

<p>I’ve been made aware of <a href="http://www.ntp.org"><abbr title="Network Time Protocol">NTP</abbr></a>, which provides a mechanism of transmitting an accurate time across a network. However, (according to the FAQ it can take up to 5 minutes to determine the time accurately)[http://www.ntp.org/ntpfaq/<abbr title="Network Time Protocol">NTP</abbr>-s-algo.htm]. This is because it has to make multiple requests to sanity-check the result and ensure latency isn’t affecting the time.</p>

<p>I doubt many people will remain on the home page for 5 minutes and since the page would not have access to set the time of the user’s computer clock the process would have to start from scratch each time the page loaded.</p>

]]></content>
  </entry>
  
</feed>
